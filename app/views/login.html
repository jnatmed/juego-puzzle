{% include 'partials/base.html' %}

<body>
  {% include 'partials/nav-puzzle.html' %}
  <script>
      window.fbAsyncInit = function() {
        FB.init({
            appId            : '684734175655791',
            autoLogAppEvents : true,
            xfbml            : true,
            version          : 'v7.0'
        });
        FB.AppEvents.logPageView();
      };

      (function(d,s,id){
        var js,fjs = d.getElementByTagName(s)[0];
        if(d.getElementById(id)){return;}
        js = d.createElement(s); js.id=id;
        js.src="https://connect.facebook.net/en_US/sdk.js";
        fjs.parentNode.insertBefore(js,fjs);
      }(document,'script','facebook-jssdk'));

      function fblogin(){
        FB.login(function(response) {
          if (response.authResponse) {
            console.log('Welcome!  Fetching your information.... ');
              FB.api('/me', function(response) {
                console.log('Good to see you, ' + response.name + '.');
              });
            } else {
             console.log('User cancelled login or did not fully authorize.');
            }
          });
      }
    
      FB.getLoginStatus(function(response) {
        statusChangeCallback(response);
      });
  </script>
  <section class="session">
    <fieldset>
        <legend>Login</legend>
        <section class="login">
          <form action="iniciar_session" method="POST">
            <article class="inputform">
              <label for="usuario">Usuario</label>
              <input type="text" name="usuario">
            </article>
            <article class="inputform">
              <label for="contraseña">Contraseña</label>
              <input type="password" name="contrasenia">
            </article>
            <article class="inputform">
              <input class="submit" type="submit" name="login" value="Loguearse">
            </article>  
          </form>
          <p>{{ mensaje_error.logueo }}</p>
        </section>
        <section class="login_fb">
          <a href="javascript:void(0)" onclick="fbLogin()">Login con Facebook</a>
        </section>
      </fieldset>
      <fieldset>
        <legend>Registro</legend>
        <section class="registro">
          <form action="registrar_usuario" method="POST">
            <article class="inputform">
              <label for="usuario">Usuario</label>
              <input type="text" name="usuario">
            </article>  
            <article class="inputform">
              <label for="contraseña">Contraseña</label>
              <input type="password" name="contrasenia">
            </article>
            <article class="inputform">
              <label for="alias">Alias</label>
              <input type="text" name="alias" id="alias">
            </article>   
            <article class="inputform">
              <label for="email">Correo Electrónico</label>
              <input type="text" name="email" id="email">
            </article>   
            <article class="inputform">
              <input class="submit" type="submit" name="login" value="Registrar">
            </article>  
          </form>
          <p>{{ mensaje_error.registro }}</p>
        </section>
      </fieldset>
  </section>
</body>
</html>